# 服务端口（Docker 映射端口 / npm start 监听端口）
PORT=8088

# API 访问密钥（用于 /v1、/v1beta、/v1/messages 等接口）
API_KEY=sk-change-me

# 监听地址（仅 npm start 生效，Docker 会强制设为 0.0.0.0）
HOST=127.0.0.1

# 管理面板登录密码
ADMIN_PASSWORD=change-me
# JWT 签名密钥
JWT_SECRET=change-me-too

# ========== 可选配置 ==========

# 数据库路径
# DB_PATH=./data/database.sqlite

# 允许使用 ADMIN_PASSWORD 作为 Bearer Token（生产环境建议关闭）
# ADMIN_PASSWORD_BEARER_COMPAT=true

# ========== 并发与限流 ==========

# 单账号最大并发数（默认 0 = 不限制）
# MAX_CONCURRENT_PER_ACCOUNT=0

# 单模型最大并发数（默认 0 = 不限制）
# MAX_CONCURRENT_PER_MODEL=0

# 容量错误（429）切号重试次数
# UPSTREAM_CAPACITY_RETRIES=2

# 重试基础延迟（毫秒）
# UPSTREAM_CAPACITY_RETRY_DELAY_MS=1000

# 同号重试次数（非容量错误时，在换号前先重试几次）
# SAME_ACCOUNT_RETRIES=2

# 同号重试延迟（毫秒）
# SAME_ACCOUNT_RETRY_DELAY_MS=500

# 连续失败多少次才禁用账号（防止偶发错误导致账号被禁）
# ERROR_COUNT_TO_DISABLE=3

# 容量错误后默认冷却时间（毫秒）
# CAPACITY_COOLDOWN_DEFAULT_MS=15000

# 冷却时间上限（毫秒）
# CAPACITY_COOLDOWN_MAX_MS=120000

# ========== 网络代理 ==========

# 出站 HTTP(S) 代理（解决部分网络环境下 OAuth/Token 刷新超时问题）
# OUTBOUND_PROXY=http://127.0.0.1:7890

# fetch 连接超时（毫秒）
# FETCH_CONNECT_TIMEOUT_MS=30000

# ========== 工具调用限制 ==========

# 工具输出字符数限制（仅对转发到上游的 tool_result 生效）
# 默认：禁用（0 = 不限制）
# TOOL_RESULT_MAX_CHARS=0
# TOOL_RESULT_TOTAL_MAX_CHARS=0

# 截断时保留尾部字符数
# TOOL_RESULT_TAIL_CHARS=1200

# 是否记录截断日志
# TOOL_RESULT_TRUNCATE_LOG=false

# ========== Token 限制 ==========

# 包含工具调用时的 max_tokens 上限（0 = 不限制）
# MAX_OUTPUT_TOKENS_WITH_TOOLS=0
